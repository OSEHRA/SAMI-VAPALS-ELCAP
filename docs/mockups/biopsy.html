<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <meta content="2019.10.01" name="version"/>
  <meta content="Domenic DiNatale, domenic.dinatale@paraxialtech.com" name="author"/>
  <title>
   Biopsy Form
  </title>
  <link href="../www/lib/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../www/lib/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
  <link href="../www/lib/formvalidation/dist/css/formValidation.min.css" rel="stylesheet"/>
  <link href="../www/lib/bootstrap-datetimepicker-4.17.47/css/bootstrap-datetimepicker.css" rel="stylesheet"/>
  <link href="../www/vapals.css" rel="stylesheet"/>
  <link href="../www/lib/jquery-ui-1.12.1/jquery-ui.min.css" rel="stylesheet"/>
  <link href="../www/lib/jquery-ui-1.12.1/jquery-ui.structure.min.css" rel="stylesheet"/>
  <link href="../www/lib/jquery-ui-1.12.1/jquery-ui.theme.min.css" rel="stylesheet"/>
  <link href="../www/lib/bootstrap-dialog-1.35.4/bootstrap-dialog.min.css" rel="stylesheet"/>
 </head>
 <body id="body" style="position: relative;">
  <script src="../www/lib/es6-shim.js">
  </script>
  <script src="../www/lib/jquery-3.3.1.min.js">
  </script>
  <script src="../www/lib/jquery-ui-1.12.1/jquery-ui.min.js">
  </script>
  <script src="../www/lib/popper.min.js">
  </script>
  <script src="../www/lib/bootstrap-3.3.7-dist/js/bootstrap.min.js">
  </script>
  <script src="../www/lib/moment.js">
  </script>
  <script src="../www/lib/formvalidation/dist/js/FormValidation.full.min.js">
  </script>
  <script src="../www/lib/formvalidation/dist/js/plugins/Wizard.min.js">
  </script>
  <script src="../www/lib/formvalidation/dist/js/plugins/Bootstrap3.min.js">
  </script>
  <script src="../www/lib/formvalidation/dist/js/plugins/J.min.js">
  </script>
  <script src="../www/lib/bootstrap-datetimepicker-4.17.47/js/bootstrap-datetimepicker.min.js">
  </script>
  <script src="../www/lib/bootstrap-dialog-1.35.4/bootstrap-dialog.min.js">
  </script>
  <script src="../www/lib/clipboard.js">
  </script>
  <script src="https://www.gstatic.com/charts/loader.js" type="text/javascript">
  </script>
  <script src="../www/jquery-conditonally-enable.js">
  </script>
  <script src="../www/jquery-conditonally-display.js">
  </script>
  <script src="../www/jqueryui-vista-filemanAutocomplete.js">
  </script>
  <script src="../www/vapals.js">
  </script>
  <script src="../www/init.js">
  </script>
  <script src="../www/nodule-grid.js">
  </script>
  <!--System Navigation-->
  <nav class="navbar navbar-default" role="navigation">
   <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
     <button class="navbar-toggle collapsed" data-target="#navbar-main" data-toggle="collapse" type="button">
      <span class="sr-only">
       Toggle navigation
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
     </button>
     <a class="text-nowrap" href="home.html" style="text-decoration: none">
      <img alt="VAPALS-ELCAP Logo" class="hidden-xs" src="../www/img/logo_transparent_50x50.png" title="VAPALS-ELCAP"/>
      <img alt="VAPALS-ELCAP Logo" src="../www/img/logo_name_50x215.png" title="VAPALS-ELCAP"/>
     </a>
    </div>
    <div class="navbar-collapse collapse navbar-right" id="navbar-main">
     <ul class="nav navbar-nav">
      <li>
       <a href="home.html">
        Home
       </a>
      </li>
      <li id="studyIdMenu" style="display:none;">
       <a class="navigation" data-method="get" data-samiroute="casereview" href="casereview.html">
        Case Review
       </a>
      </li>
      <li class="dropdown">
       <a aria-expanded="false" aria-haspopup="true" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
        Reports
        <span class="caret">
        </span>
       </a>
       <ul class="dropdown-menu">
        <li>
         <a class="navigation" data-method="get" data-samireporttype="enrollment" data-samiroute="report" data-start-date="" href="table.html">
          Enrollment
         </a>
        </li>
        <li>
         <a class="navigation" data-method="get" data-samireporttype="activity" data-samiroute="report" href="table.html">
          Activity
         </a>
        </li>
        <li>
         <a class="navigation" data-method="get" data-samireporttype="followup" data-samiroute="report" href="table.html">
          Participant Follow-up
         </a>
        </li>
        <li>
         <a class="navigation" data-method="get" data-samireporttype="missingct" data-samiroute="report" href="table.html">
          Missing Image &amp; CT Evaluation
         </a>
        </li>
        <li>
         <a class="navigation" data-method="get" data-samireporttype="incomplete" data-samiroute="report" href="table.html">
          Incomplete Form
         </a>
        </li>
        <li>
         <a class="navigation" data-method="get" data-samireporttype="inactive" data-samiroute="report" href="table.html">
          Inactive
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
   </div>
  </nav>
  <div class="container-fluid" style="max-width:1550px">
   <h1>
    Sample, Sammy G
    <small class="text-muted" title="Study ID">
     ST0001
    </small>
   </h1>
   <h2>
    Biopsy Form
    <small class="text-muted" title="Medical Record Number">
     1234567890
    </small>
   </h2>
   <div class="alert alert-warning">
    If a new lesion is identified at a later point and new diagnostics are performed, please use a new form.
   </div>
   <hr/>
   <form action="biopsy.html" class="validated" id="main-form" method="get">
    <input name="samiroute" type="hidden" value="postform"/>
    <input name="studyid" type="hidden" value="@@SID@@"/>
    <input name="form" type="hidden" value="@@FORMKEY@@"/>
    <h3>
     Biopsy
    </h3>
    <div class="row">
     <div class="col-md-3 form-group">
      <label class="control-label required">
       Was a biopsy performed?
      </label>
      <div>
       <label class="radio-inline" for="bxp-n">
        <input id="bxp-n" name="bxp" required="required" type="radio" value="n"/>
        No
       </label>
       <label class="radio-inline" for="bxp-y">
        <input id="bxp-y" name="bxp" type="radio" value="y"/>
        Yes
       </label>
      </div>
     </div>
    </div>
    <div id="bxp-container">
     <div class="row">
      <div class="col-sm-4 col-md-3 form-group">
       <label class="control-label required" for="bxdos">
        Procedure date
       </label>
       <div class="input-group datepicker">
        <input aria-describedby="bxdos-addon" class="form-control" data-restriction="past" id="bxdos" name="bxdos" required="required"/>
        <div class="input-group-addon">
         <div class="input-group-text" id="bxdos-addon">
          <i aria-hidden="true" class="fa fa-calendar">
          </i>
         </div>
        </div>
       </div>
       <small class="form-text text-muted">
        MM/DD/YYYY
       </small>
      </div>
      <div class="col-sm-8 col-md-6 form-group">
       <label class="control-label required" for="bxw">
        Where was the biopsy performed?
       </label>
       <input class="form-control" id="bxw" name="bxw" required="required" type="text"/>
      </div>
     </div>
     <div class="row" style="padding-bottom: 10px;">
      <div class="col-sm-4">
       <div class="form-group">
        <label class="control-label required">
         Indication for biopsy
        </label>
        <div class="checkbox">
         <label>
          <input name="bxinds" type="hidden" value=""/>
          <input id="bxinds" name="bxinds" type="checkbox" value="s"/>
          Size
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxindr" type="hidden" value=""/>
          <input id="bxindr" name="bxindr" type="checkbox" value="r"/>
          No resolution after abx
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxindg" type="hidden" value=""/>
          <input id="bxindg" name="bxindg" type="checkbox" value="g"/>
          Growth
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxindp" type="hidden" value=""/>
          <input id="bxindp" name="bxindp" type="checkbox" value="p"/>
          Positive PET
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxindo" type="hidden" value=""/>
          <input id="bxindo" name="bxindo" type="checkbox" value="o"/>
          Other (specify)
         </label>
        </div>
        <label class="aria-hidden" for="bxind">
         Specify
        </label>
        <input class="form-control input-sm" id="bxind" name="bxind" required="required" type="text"/>
       </div>
      </div>
      <div class="col-sm-4">
       <div class="form-group">
        <label class="control-label required">
         Lesion site
        </label>
        <div class="checkbox">
         <label>
          <input name="bxloclul" type="hidden" value=""/>
          <input id="bxloclul" name="bxloclul" type="checkbox" value="lul"/>
          LUL
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxloclll" type="hidden" value=""/>
          <input id="bxloclll" name="bxloclll" type="checkbox" value="lll"/>
          LLL
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxloclh" type="hidden" value=""/>
          <input id="bxloclh" name="bxloclh" type="checkbox" value="lh"/>
          L hilum
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxloclg" type="hidden" value=""/>
          <input id="bxloclg" name="bxloclg" type="checkbox" value="lg"/>
          L lingula
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxlocrul" type="hidden" value=""/>
          <input id="bxlocrul" name="bxlocrul" type="checkbox" value="rul"/>
          RUL
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxlocrml" type="hidden" value=""/>
          <input id="bxlocrml" name="bxlocrml" type="checkbox" value="rml"/>
          RML
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxlocrll" type="hidden" value=""/>
          <input id="bxlocrll" name="bxlocrll" type="checkbox" value="rll"/>
          RLL
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxlocrh" type="hidden" value=""/>
          <input id="bxlocrh" name="bxlocrh" type="checkbox" value="rh"/>
          R hilum
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxloce" type="hidden" value=""/>
          <input id="bxloce" name="bxloce" type="checkbox" value="e"/>
          Endobronchial
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxlocm" type="hidden" value=""/>
          <input id="bxlocm" name="bxlocm" type="checkbox" value="m"/>
          Mediastinum
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxlocp" type="hidden" value=""/>
          <input id="bxlocp" name="bxlocp" type="checkbox" value="p"/>
          Pleura
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxloco" type="hidden" value=""/>
          <input id="bxloco" name="bxloco" type="checkbox" value="o"/>
          Other (specify)
         </label>
        </div>
        <label class="aria-hidden" for="bxlocs">
         Specify
        </label>
        <input class="form-control input-sm" id="bxlocs" name="bxlocs" required="required" title="Other" type="text"/>
       </div>
      </div>
      <div class="col-sm-4">
       <div class="form-group">
        <label>
         Type of specimen
        </label>
        <div class="checkbox">
         <label>
          <input name="bxtosc" type="hidden" value=""/>
          <input id="bxtosc" name="bxtosc" type="checkbox" value="c"/>
          Cytology
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxtosh" type="hidden" value=""/>
          <input id="bxtosh" name="bxtosh" type="checkbox" value="h"/>
          Histology
         </label>
        </div>
       </div>
       <div class="form-group">
        <label>
         Type of procedure
        </label>
        <div class="checkbox">
         <label>
          <input name="bxtopc" type="hidden" value=""/>
          <input id="bxtopc" name="bxtopc" type="checkbox" value="c"/>
          Needle biopsy
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxtopb" type="hidden" value=""/>
          <input id="bxtopb" name="bxtopb" type="checkbox" value="b"/>
          Bronchoscopy
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxtopv" type="hidden" value=""/>
          <input id="bxtopv" name="bxtopv" type="checkbox" value="v"/>
          VAT
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxtopt" type="hidden" value=""/>
          <input id="bxtopt" name="bxtopt" type="checkbox" value="t"/>
          Thoracotomy
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="bxtopo" type="hidden" value=""/>
          <input id="bxtopo" name="bxtopo" type="checkbox" value="o"/>
          Other (specify)
         </label>
        </div>
        <label class="aria-hidden" for="bxtopos">
         Specify
        </label>
        <input class="form-control" id="bxtopos" name="bxtopos" required="required" type="text"/>
       </div>
      </div>
     </div>
     <div class="row">
      <div class="col-md-4 form-group">
       <label class="control-label required">
        Complications during biopsy?
       </label>
       <div>
        <label class="radio-inline" for="bxcp-n">
         <input id="bxcp-n" name="bxcp" required="required" type="radio" value="n"/>
         No
        </label>
        <label class="radio-inline" for="bxcp-y">
         <input id="bxcp-y" name="bxcp" required="required" type="radio" value="y"/>
         Yes
        </label>
       </div>
      </div>
      <div class="col-md-8">
       <div id="bxcp-container">
        <div class="form-group">
         <label class="required">
          Type of complication
         </label>
         <div class="checkbox">
          <label>
           <input name="bxcpct" type="hidden" value=""/>
           <input id="bxcpct" name="bxcpct" type="checkbox" value="c"/>
           Chest tube
          </label>
         </div>
         <div class="checkbox">
          <label>
           <input name="bxcppt" type="hidden" value=""/>
           <input id="bxcppt" name="bxcppt" type="checkbox" value="pt"/>
           Pneumothorax
          </label>
         </div>
         <div class="checkbox">
          <label>
           <input name="bxcppn" type="hidden" value=""/>
           <input id="bxcppn" name="bxcppn" type="checkbox" value="pn"/>
           Pneumonectasis
          </label>
         </div>
         <div class="checkbox">
          <label>
           <input name="bxcpo" type="hidden" value=""/>
           <input id="bxcpo" name="bxcpo" type="checkbox" value="o"/>
           Other (specify)
          </label>
         </div>
         <label class="aria-hidden" for="bxcpos">
          Specify
         </label>
         <input class="form-control input-sm" id="bxcpos" name="bxcpos" required="required" type="text"/>
        </div>
       </div>
      </div>
     </div>
     <div class="row">
      <div class="col-md-12 form-group">
       <label for="bxpdt">
        Biopsy pathology details
       </label>
       <textarea class="form-control" id="bxpdt" name="bxpdt"></textarea>
      </div>
     </div>
    </div>
    <h3>
     Mediastinoscopy
    </h3>
    <div class="row">
     <div class="col-md-3 form-group">
      <label class="control-label required">
       Was a mediastinoscopy performed?
      </label>
      <div>
       <label class="radio-inline" for="rbmep-n">
        <input id="rbmep-n" name="rbmep" required="required" type="radio" value="n"/>
        No
       </label>
       <label class="radio-inline" for="rbmep-y">
        <input id="rbmep-y" name="rbmep" type="radio" value="y"/>
        Yes
       </label>
      </div>
     </div>
    </div>
    <div id="rbmep-container">
     <div class="row">
      <div class="col-md-3 form-group">
       <label class="control-label required" for="rbmed">
        Procedure date
       </label>
       <div class="input-group datepicker">
        <input aria-describedby="rbmed-addon" class="form-control" data-restriction="past" id="rbmed" name="rbmed"/>
        <div class="input-group-addon">
         <div class="input-group-text" id="rbmed-addon">
          <i aria-hidden="true" class="fa fa-calendar">
          </i>
         </div>
        </div>
       </div>
       <small class="form-text text-muted">
        MM/DD/YYYY
       </small>
      </div>
      <div class="col-md-6 form-group">
       <label class="control-label required" for="rbmel">
        Where was the mediastinoscopy
                            performed?
       </label>
       <input class="form-control" id="rbmel" name="rbmel" required="required" type="text"/>
      </div>
     </div>
     <div class="row" style="padding-bottom: 10px;">
      <div class="col-md-4">
       <label class="control-label required">
        Lesion site
       </label>
       <div class="form-group">
        <div class="checkbox">
         <label>
          <input name="rbmllul" type="hidden" value=""/>
          <input id="rbmllul" name="rbmllul" type="checkbox" value="lul"/>
          LUL
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmllll" type="hidden" value=""/>
          <input id="rbmllll" name="rbmllll" type="checkbox" value="lll"/>
          LLL
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmllh" type="hidden" value=""/>
          <input id="rbmllh" name="rbmllh" type="checkbox" value="lh"/>
          L hilum
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmllg" type="hidden" value=""/>
          <input id="rbmllg" name="rbmllg" type="checkbox" value="lg"/>
          L lingula
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmlrul" type="hidden" value=""/>
          <input id="rbmlrul" name="rbmlrul" type="checkbox" value="rul"/>
          RUL
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmlrml" type="hidden" value=""/>
          <input id="rbmlrml" name="rbmlrml" type="checkbox" value="rml"/>
          RML
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmlrll" type="hidden" value=""/>
          <input id="rbmlrll" name="rbmlrll" type="checkbox" value="rll"/>
          RLL
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmlrh" type="hidden" value=""/>
          <input id="rbmlrh" name="rbmlrh" type="checkbox" value="rh"/>
          R hilum
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmle" type="hidden" value=""/>
          <input id="rbmle" name="rbmle" type="checkbox" value="e"/>
          Endobronchial
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmlm" type="hidden" value=""/>
          <input id="rbmlm" name="rbmlm" type="checkbox" value="m"/>
          Mediastinum
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmlp" type="hidden" value=""/>
          <input id="rbmlp" name="rbmlp" type="checkbox" value="p"/>
          Pleura
         </label>
        </div>
        <div class="checkbox">
         <label>
          <input name="rbmlo" type="hidden" value=""/>
          <input id="rbmlo" name="rbmlo" type="checkbox" value="o"/>
          Other (specify)
         </label>
        </div>
        <label class="aria-hidden" for="rbmls">
         Specify
        </label>
        <input class="form-control input-sm" id="rbmls" name="rbmls" required="required" type="text"/>
       </div>
      </div>
     </div>
     <div class="row">
      <div class="col-md-4 form-group">
       <label class="required">
        Complications during procedure?
       </label>
       <div>
        <label class="radio-inline" for="rbmec-n">
         <input id="rbmec-n" name="rbmec" required="required" type="radio" value="n"/>
         No
        </label>
        <label class="radio-inline" for="rbmec-y">
         <input id="rbmec-y" name="rbmec" required="required" type="radio" value="y"/>
         Yes
        </label>
       </div>
      </div>
      <div class="col-md-4 form-group">
       <label for="rbmecos">
        Specify
       </label>
       <input class="form-control input-sm" id="rbmecos" name="rbmecos" required="required" type="text"/>
      </div>
     </div>
    </div>
    <h3>
     Molecular Testing
    </h3>
    <div class="row">
     <div class="col-md-5 form-group">
      <label class="control-label required">
       Was molecular testing performed on the pathology
                        specimen?
      </label>
      <div>
       <label class="radio-inline" for="rbmt-n">
        <input id="rbmt-n" name="rbmt" required="required" type="radio" value="n"/>
        No
       </label>
       <label class="radio-inline" for="rbmt-y">
        <input id="rbmt-y" name="rbmt" required="required" type="radio" value="y"/>
        Yes
       </label>
      </div>
     </div>
    </div>
    <div class="row">
     <div class="col-sm-4 form-group" id="rbmt-container">
      <div class="form-group">
       <label class="control-label required">
        EGFR
       </label>
       <br/>
       <label class="radio-inline" for="rbmte-n">
        <input id="rbmte-n" name="rbmte" required="required" type="radio" value="n"/>
        No
       </label>
       <label class="radio-inline" for="rbmte-neg">
        <input id="rbmte-neg" name="rbmte" type="radio" value="neg"/>
        Negative
       </label>
       <label class="radio-inline" for="rbmte-pos">
        <input id="rbmte-pos" name="rbmte" type="radio" value="pos"/>
        Positive
       </label>
      </div>
      <div class="form-group">
       <label class="control-label required">
        K-Ras
       </label>
       <br/>
       <label class="radio-inline" for="rbmtk-n">
        <input id="rbmtk-n" name="rbmtk" required="required" type="radio" value="n"/>
        No
       </label>
       <label class="radio-inline" for="rbmtk-neg">
        <input id="rbmtk-neg" name="rbmtk" type="radio" value="neg"/>
        Negative
       </label>
       <label class="radio-inline" for="rbmtk-pos">
        <input id="rbmtk-pos" name="rbmtk" type="radio" value="pos"/>
        Positive
       </label>
      </div>
      <div class="form-group">
       <label class="control-label required">
        ALK
       </label>
       <br/>
       <label class="radio-inline" for="rbmta-n">
        <input id="rbmta-n" name="rbmta" required="required" type="radio" value="n"/>
        No
       </label>
       <label class="radio-inline" for="rbmta-neg">
        <input id="rbmta-neg" name="rbmta" type="radio" value="neg"/>
        Negative
       </label>
       <label class="radio-inline" for="rbmta-pos">
        <input id="rbmta-pos" name="rbmta" type="radio" value="pos"/>
        Positive
       </label>
      </div>
      <div class="form-group">
       <label class="control-label" for="rbmtos">
        Other
       </label>
       <input class="form-control" id="rbmtos" name="rbmtos" placeholder="specify" type="text"/>
       <div id="rbmto-container">
        <label class="radio-inline" for="rbmto-n">
         <input id="rbmto-n" name="rbmto" required="required" type="radio" value="n"/>
         No
        </label>
        <label class="radio-inline" for="rbmto-neg">
         <input id="rbmto-neg" name="rbmto" type="radio" value="neg"/>
         Negative
        </label>
        <label class="radio-inline" for="rbmto-pos">
         <input id="rbmto-pos" name="rbmto" type="radio" value="pos"/>
         Positive
        </label>
       </div>
      </div>
     </div>
    </div>
    <hr/>
    <div class="pull-left">
     <input name="samistatus" type="hidden" value=""/>
     <button class="btn btn-default" id="save-for-later-button" type="submit">
      Save for Later
     </button>
     <button class="btn btn-primary" id="submit-button" type="submit">
      Submit
     </button>
    </div>
    <div class="pull-right">
     <a class="btn btn-danger" id="delete-form">
      <span class="glyphicon glyphicon-trash">
      </span>
      Delete
     </a>
    </div>
   </form>
  </div>
  <div class="modal fade" id="delete-confirm-modal" role="dialog" tabindex="-1">
   <div class="modal-dialog" role="document">
    <div class="modal-content">
     <div class="modal-header">
      <button aria-label="Close" class="close" data-dismiss="modal" type="button">
       <span aria-hidden="true">
        ×
       </span>
      </button>
      <h4 class="modal-title">
       Warning
      </h4>
     </div>
     <div class="modal-body">
      <p>
       Are you certain you want to delete this form?
      </p>
     </div>
     <div class="modal-footer">
      <a class="btn btn-primary" data-dismiss="modal" id="delete-form-cancel">
       No
      </a>
      <a class="btn btn-danger navigation" data-form="@@FORMKEY@@" data-method="get" data-samiroute="deleteform" href="biopsy.html" id="delete-form-btn">
       Yes
      </a>
     </div>
    </div>
   </div>
  </div>
  <span id="studyid-html-element" style="display:none;" value="@@SID@@">
  </span>
  <footer>
   <div class="container-fluid" style="max-width:1550px">
    <hr/>
    <a href="https://issues.osehra.org/browse/VAP" tabindex="9000" target="_blank">
     Submit feedback
    </a>
    <span id="sami-version" style="float:right; font-family: Courier,monospace">
     <span id="formMode">
     </span>
     2019.10.01
    </span>
   </div>
  </footer>
  <script>
   const studyIdVal = $("#studyid-html-element").attr('value');
    const studyId = $.trim(studyIdVal);
    if (studyId && studyId.indexOf("@@") === -1) {
        //store studyid value for use in pages that don't go through the forms processor
        localStorage.setItem("studyid", studyId);
        $("#studyIdMenu").show();
    }

    //purposefully executed before DOM is rendered so delete button is never visible
    const frozen = "@@FROZEN@@";
    if (frozen == "true") {
        $("#delete-form").remove();
    }


    $(function () {
        /** These snippets ensure all fields are wrapped in a form-group, which is necessary for form-validation to work properly. **/
        const $forms = $("form.validated");
        $.each($forms.find("select, textarea, input:visible"), function () {
            const $input = $(this);
            if ($input.closest(".form-group").length === 0) {
                console.error("VAPALS: " + $input.attr('name') + " is not wrapped in a form-group; can cause FV 'too much recursion");
            }
        });

        $.each($forms.find("input[type=hidden][required]"), function () {
            console.error("VAPALS: " + $(this).attr('name') + " should not have a required attribute; can cause FV 'too much recursion'");
        });

        $.ajax("/ctversion", {
            success: function (data) {
                const v = data.ctversion;
                $("#formMode").text(v.toUpperCase());
            },
            error: function () {
                $("#formMode").text("UNKNOWN");
            }
        });

        $("input[type=checkbox]").change(function () {
            const checked = $(this).is(":checked");
            const fieldName = $(this).attr('name');
            $("input[type=hidden][name='" + fieldName + "']").prop('disabled', function () {
                return checked;
            });
        });

        $.each($("input[type=checkbox]:checked"), function (i, el) {
            $(el).trigger("change");
        });

        const reportsStartDate = VAPALS.toMoment(VAPALS.todaysDate()).subtract(30, "days").format(VAPALS.DATE_FORMAT);
        const reportsEndDate = VAPALS.toMoment(VAPALS.todaysDate()).format(VAPALS.DATE_FORMAT);

        $("a[data-samiroute=report]").attr("data-start-date", reportsStartDate).attr("data-end-date", reportsEndDate);

    })
  </script>
  <script>
   function createFormValidator() {

            const $form = $('#main-form');
            const multiInputValidators = ['bxp', 'bxcp', 'rbmep', 'rbmec', 'rbmt', 'rbmte', 'rbmtk', 'rbmta', 'rbmto'];

            $form.formValidation({
                    fields: {
                        //BIOPSY
                        bxp: {validators: {notEmpty: {message: 'Biopsy location is required'}}},
                        bxdos: {
                            validators: {
                                notEmpty: {message: 'Procedure date is required'},
                                date: {
                                    max: VAPALS.todaysDate(),
                                    message: 'Procedure date must be before today'
                                }
                            }
                        },
                        bxw: {validators: {notEmpty: {message: 'Biopsy performed is required'}}},
                        bxinds: { //use a real element name for the field so conditional plugins can toggle the field
                            selector: '[name^=bxind]',
                            validators: {choice: {min: 1, message: 'Select one or more indications'}}
                        },
                        bxind: {validators: {notEmpty: {message: 'Other indication is required'}}},
                        bxloclul: { //use a real element name for the field so conditional plugins can toggle the field
                            selector: '[name^=bxloc]',
                            validators: {choice: {min: 1, message: 'Select one or more sites'}}
                        },
                        bxlocs: {validators: {notEmpty: {message: 'Other lesion site is required'}}},
                        bxtosc: { //use a real element name for the field so conditional plugins can toggle the field
                            selector: '[name^=bxtos]',
                            validators: {choice: {min: 1, message: 'Select one or more specimen types'}}
                        },
                        bxtopc: { //use a real element name for the field so conditional plugins can toggle the field
                            selector: '[name^=bxtop]',
                            validators: {choice: {min: 1, message: 'Select one or more procedure types'}}
                        },
                        bxtopos: {validators: {notEmpty: {message: 'Other type of procedure is required'}}},
                        bxcp: {validators: {notEmpty: {message: 'Complications is required'}}},
                        bxcpct: { //use a real element name for the field so conditional plugins can toggle the field
                            selector: '[name=bxcpct],[name=bxcppt],[name=bxcppn],[name=bxcpo]',
                            validators: {choice: {min: 1, message: 'Select one or more complication'}}
                        },
                        bxcpos: {validators: {notEmpty: {message: 'Other complication is required'}}},

                        //Mediastinoscopy
                        rbmep: {validators: {notEmpty: {message: 'Mediastinoscopy performed is required'}}},
                        rbmed: {
                            validators: {
                                notEmpty: {message: 'Procedure date is required'},
                                date: {
                                    max: VAPALS.todaysDate(),
                                    message: 'Procedure date must be before today'
                                }
                            }
                        },
                        rbmel: {validators: {notEmpty: {message: 'Mediastinoscopy location is required'}}},
                        rbmllul: { //use a real element name for the field so conditional plugins can toggle the field
                            selector: '[name^=rbml]',
                            validators: {choice: {min: 1, message: 'Select one or more sites'}}
                        },
                        rbmls: {validators: {notEmpty: {message: 'Other lesion site is required'}}},
                        rbmec: {validators: {notEmpty: {message: 'Complications is required'}}},
                        rbmecos: {validators: {notEmpty: {message: 'Other complication is required'}}},

                        //Molecular Testing
                        rbmt: {validators: {notEmpty: {message: 'Molecular testing is required'}}},
                        rbmte: {validators: {notEmpty: {message: 'EGFR is required'}}},
                        rbmtk: {validators: {notEmpty: {message: 'KRas is required'}}},
                        rbmta: {validators: {notEmpty: {message: 'ALK is required'}}},
                        rbmto: {validators: {notEmpty: {message: 'Other is required'}}},


                    },
                    plugins: {
                        trigger: new FormValidation.plugins.Trigger(),
                        bootstrap3: new FormValidation.plugins.Bootstrap3(),
                        submitButton: new FormValidation.plugins.SubmitButton({selector: "#submit-button"}),
                        defaultSubmit: new FormValidation.plugins.DefaultSubmit(),
                        excluded: new FormValidation.plugins.Excluded(), //disable validators on hidden, disabled fields
                        icon: new FormValidation.plugins.Icon({
                            valid: '',
                            invalid: 'glyphicon glyphicon-remove',
                            validating: 'glyphicon glyphicon-refresh',
                            onPlaced: function (e) {
                                if (multiInputValidators.indexOf(e.field) > -1) {
                                    $("#" + e.element.id).closest(".form-group").append(e.iconElement);
                                }
                            },
                        })
                    }
                }
            );

            const fv = $form.data('formValidation');
            fv.on('core.form.invalid', VAPALS.autoScrollToErrorField);
            fv.on('core.element.validated', VAPALS.hideSuccessFormatting);

            return fv;
        }

        $(function () {
            createFormValidator();

            //Biopsy
            $("[name='bxp']").conditionallyDisplay({enable: $("#bxp-container")}); //entire form
            $("#bxindo").conditionallyEnable({sourceValues: "o", enable: "#bxind"}); // other indication
            $("#bxloco").conditionallyEnable({sourceValues: "o", enable: "#bxlocs"}); //other lesion
            $("#bxtopo").conditionallyEnable({sourceValues: "o", enable: "#bxtopos"}); // other type of procedure
            $("[name='bxcp']").conditionallyEnable({enable: $("#bxcp-container")}); //procedure details
            $("#bxcpo").conditionallyEnable({sourceValues: "o", enable: "#bxcpos"}); // other complication

            //Mediastinoscopy
            $("[name='rbmep']").conditionallyDisplay({enable: $("#rbmep-container")}); //entire section
            $("#rbmlo").conditionallyEnable({sourceValues: "o", enable: "#rbmls"}); //other lesion
            $("[name=rbmec]").conditionallyEnable({enable: "#rbmecos"}); // complication specificity

            //Molecular Testing
            $("[name='rbmt']").conditionallyDisplay({enable: "#rbmt-container"}); //entire section
            $("[name='rbmtos']").conditionallyEnable({
                sourceValues: function (actualValue) {
                    return actualValue !== "";
                }, enable: "#rbmto-container"
            });
        });
  </script>
 </body>
</html>