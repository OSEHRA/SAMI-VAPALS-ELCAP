<!DOCTYPE html>
<html lang="en">
 <head>
  <!-- Required meta tags -->
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
  <title>
   LSS Intake Form
  </title>
  <link href="lib/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="lib/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
  <link href="lib/formvalidation/dist/css/formValidation.min.css" rel="stylesheet"/>
  <link href="lib/bootstrap-datetimepicker-4.17.47/css/bootstrap-datetimepicker.css" rel="stylesheet"/>
  <link href="vapals.css" rel="stylesheet"/>
  <link href="lib/jquery-ui-1.12.1/jquery-ui.min.css" rel="stylesheet"/>
  <link href="lib/jquery-ui-1.12.1/jquery-ui.structure.min.css" rel="stylesheet"/>
  <link href="lib/jquery-ui-1.12.1/jquery-ui.theme.min.css" rel="stylesheet"/>
  <link href="lib/bootstrap-dialog-1.35.4/bootstrap-dialog.min.css" rel="stylesheet"/>
 </head>
 <body>
  <script src="lib/jquery-3.3.1.min.js">
  </script>
  <script src="lib/jquery-ui-1.12.1/jquery-ui.min.js">
  </script>
  <script src="lib/popper.min.js">
  </script>
  <script src="lib/bootstrap-3.3.7-dist/js/bootstrap.min.js">
  </script>
  <script src="lib/moment.js">
  </script>
  <script src="lib/formvalidation/dist/js/formValidation.min.js">
  </script>
  <script src="lib/formvalidation/dist/js/framework/bootstrap.min.js">
  </script>
  <script src="lib/bootstrap-datetimepicker-4.17.47/js/bootstrap-datetimepicker.min.js">
  </script>
  <script src="lib/bootstrap-dialog-1.35.4/bootstrap-dialog.min.js">
  </script>
  <script src="lib/clipboard.js">
  </script>
  <script src="https://www.gstatic.com/charts/loader.js" type="text/javascript">
  </script>
  <script src="jquery-conditonally-enable.js">
  </script>
  <script src="jquery-conditonally-display.js">
  </script>
  <script src="jqueryui-vista-filemanAutocomplete.js">
  </script>
  <script src="vapals.js">
  </script>
  <script src="init.js">
  </script>
  <!--System Navigation-->
  <nav class="navbar navbar-default" role="navigation">
   <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
     <button class="navbar-toggle collapsed" data-target="#navbar-main" data-toggle="collapse" type="button">
      <span class="sr-only">
       Toggle navigation
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
     </button>
     <a href="home.html">
      <img alt="VA-PALS Logo" height="50" src="img/new-logo.png" title="VA-PALS"/>
     </a>
    </div>
    <div class="navbar-collapse collapse" id="navbar-main">
     <ul class="nav navbar-nav">
      <li>
       <a href="home.html">
        Home
       </a>
      </li>
      <li class="dropdown" id="studyIdMenu" style="display:none;">
       <a class="navigation" data-method="post" data-samiroute="casereview" href="#!">
        Case Review
       </a>
      </li>
     </ul>
    </div>
   </div>
  </nav>
  <div class="container-fluid" style="max-width:1550px">
   <h1>
    Sample, Sammy G
    <small class="text-muted" title="Study ID">
     ST0001
    </small>
   </h1>
   <h2>
    LSS Intake Form
    <small class="text-muted" title="Medical Record Number">
     1234567890
    </small>
   </h2>
   <hr/>
   <form action="/vapals" class="validated" data-fv-button-selector="#submit-button" data-fv-icon-invalid="glyphicon glyphicon-remove" data-fv-icon-valid="glyphicon glyphicon-ok" data-fv-icon-validating="glyphicon glyphicon-refresh" method="post">
    <input name="samiroute" type="hidden" value="postform"/>
    <input name="studyid" type="hidden" value="@@SID@@"/>
    <input name="form" type="hidden" value="@@FORMKEY@@"/>
    <h3>
     Contact Information
    </h3>
    <div class="row">
     <div class="col-sm-4 col-md-3 form-group">
      <label class="required" for="sidc">
       Date of contact
      </label>
      <div class="input-group datepicker">
       <input aria-describedby="sidc-addon" class="form-control" data-fv-date="true" data-fv-date-max="VAPALS.todaysDate" data-fv-notempty-message="Date of contact is required" id="sidc" name="sidc" required="required"/>
       <div class="input-group-addon">
        <div class="input-group-text" id="sidc-addon">
         <i aria-hidden="true" class="fa fa-calendar">
         </i>
        </div>
       </div>
      </div>
      <small class="form-text text-muted">
       MM/DD/YYYY
      </small>
     </div>
     <div class="col-sm-8 col-md-9 form-group">
      <label>
       How did you learn about LSS?
      </label>
      <div class="checkbox">
       <label>
        <input id="silnph" name="silnph" type="checkbox" value="1"/>
        Phone
       </label>
      </div>
      <div class="checkbox">
       <label>
        <input id="silnls" name="silnls" type="checkbox" value="1"/>
        Letter sent
       </label>
      </div>
      <div class="checkbox">
       <label>
        <input id="silnpu" name="silnpu" type="checkbox" value="1"/>
        Pulmonary
       </label>
      </div>
      <div class="checkbox">
       <label>
        <input id="silnpc" name="silnpc" type="checkbox" value="1"/>
        PCP
       </label>
      </div>
      <div class="checkbox">
       <label>
        <input id="silnpn" name="silnpn" type="checkbox" value="1"/>
        Oncology
       </label>
      </div>
      <div class="checkbox">
       <label>
        <input id="silnpp" name="silnpp" type="checkbox" value="1"/>
        Smoking cessation program
       </label>
      </div>
      <div class="checkbox">
       <label>
        <input id="silnpo" name="silnpo" type="checkbox" value="1"/>
        Other
       </label>
      </div>
      <input class="form-control input-sm" id="silnpos" name="silnpos" required="required" title="Other" type="text"/>
     </div>
    </div>
    <div class="row">
     <div class="col-md-12 form-group">
      <label class="required">
       Primary address verified
      </label>
      <label class="radio-inline" for="sipav-y">
       <input data-fv-notempty-message="Please select a value" id="sipav-y" name="sipav" required="required" type="radio" value="y"/>
       Yes
      </label>
      <label class="radio-inline" for="sipav-n">
       <input id="sipav-n" name="sipav" type="radio" value="n"/>
       No
      </label>
     </div>
    </div>
    <div class="row">
     <div class="form-group col-sm-6 ">
      <label for="sipsa">
       Preferred address
      </label>
      <input class="form-control" id="sipsa" name="sipsa" type="text"/>
     </div>
     <div class="form-group col-sm-2">
      <label for="sipan">
       Apt #
      </label>
      <input class="form-control" id="sipan" name="sipan" type="text"/>
     </div>
     <div class="form-group col-sm-4">
      <label for="sipcn">
       County
      </label>
      <input class="form-control" id="sipcn" name="sipcn" type="text"/>
     </div>
    </div>
    <div class="row">
     <div class="form-group col-md-6">
      <label for="sipc">
       City
      </label>
      <input class="form-control" id="sipc" name="sipc" type="text"/>
     </div>
     <div class="form-group col-md-1">
      <label for="sips">
       State
      </label>
      <input class="form-control" id="sips" name="sips" type="text"/>
     </div>
     <div class="form-group col-md-2">
      <label for="sipz">
       Zip
      </label>
      <input class="form-control" id="sipz" name="sipz" type="text"/>
     </div>
     <div class="form-group col-md-3">
      <label for="sipcr">
       Country
      </label>
      <input class="form-control" id="sipcr" name="sipcr" type="text"/>
     </div>
    </div>
    <div class="row">
     <div class="form-group col-sm-6 ">
      <label for="sippn">
       Phone number
      </label>
      <input class="form-control" data-fv-phone="true" data-fv-phone-country="US" id="sippn" name="sippn" type="text"/>
     </div>
    </div>
    <div class="row">
     <div class="col-md-12 form-group">
      <label class="required">
       Rural status
      </label>
      <label class="radio-inline" for="sirs-u">
       <input data-fv-notempty-message="Please select a value" id="sirs-u" name="sirs" required="required" type="radio" value="u"/>
       Urban
      </label>
      <label class="radio-inline" for="sirs-r">
       <input id="sirs-r" name="sirs" type="radio" value="r"/>
       Rural
      </label>
      <label class="radio-inline" for="sirs-n">
       <input id="sirs-n" name="sirs" type="radio" value="n"/>
       Unknown
      </label>
     </div>
    </div>
    <hr/>
    <h3>
     Smoking History
    </h3>
    <div class="row">
     <div class="col-md-12 form-group">
      <label for="sies">
       Have you ever smoked
      </label>
      <input class="form-control" id="sies" name="sies" type="text"/>
      <div class="checkbox">
       <label>
        <input id="siesn" name="siesn" type="checkbox" value="1"/>
        Never smoked
       </label>
      </div>
      <div class="checkbox">
       <label>
        <input id="siesp" name="siesp" type="checkbox" value="1"/>
        Past
       </label>
      </div>
      <div class="checkbox">
       <label>
        <input id="siesc" name="siesc" type="checkbox" value="1"/>
        Current
       </label>
      </div>
      <div class="checkbox">
       <label>
        <input id="siesq" name="siesq" type="checkbox" value="1"/>
        Willing to quit
       </label>
      </div>
     </div>
    </div>
    <div class="row">
     <div class="col-md-4">
      <label class="visible-xs visible-sm required" for="sicpd">
       How many cigarettes did you smoke per day?
      </label>
      <label class="text-right pull-right hidden-xs hidden-sm required" for="sicpd">
       How many cigarettes did you smoke per day?
      </label>
     </div>
     <div class="col-sm-2 form-group">
      <input class="form-control numeric" id="sicpd" maxlength="4" name="sicpd" required="required" type="text"/>
     </div>
    </div>
    <div class="row">
     <div class="col-md-4">
      <label class="visible-xs visible-sm " for="sippd">
       How many packs of cigarettes did you smoke per day (PPD)?
      </label>
      <label class="text-right pull-right hidden-xs hidden-sm " for="sippd">
       How many packs of cigarettes did you smoke per day (PPD)?
      </label>
     </div>
     <div class="col-sm-2 form-group">
      <span class="control-label" id="sippd-val">
      </span>
     </div>
     <input id="sippd" name="sippd" type="hidden"/>
    </div>
    <div class="row">
     <div class="col-md-4">
      <label class="visible-xs visible-sm required" for="sisny">
       # of years
      </label>
      <label class="text-right pull-right hidden-xs hidden-sm required" for="sisny">
       # of years
      </label>
     </div>
     <div class="col-sm-2 form-group">
      <input class="form-control numeric" id="sisny" maxlength="3" name="sisny" required="required" type="text"/>
     </div>
    </div>
    <div class="row">
     <div class="col-md-4">
      <label class="visible-xs visible-sm " for="sippy">
       Reported pack years
      </label>
      <label class="text-right pull-right hidden-xs hidden-sm " for="sippy">
       Reported pack years
      </label>
     </div>
     <div class="col-sm-2 form-group">
      <span id="sippy-val">
      </span>
     </div>
     <input id="sippy" name="sippy" type="hidden"/>
    </div>
    <div class="row">
     <div class="col-md-4">
      <label class="visible-xs visible-sm " for="siq">
       Quit
      </label>
      <label class="text-right pull-right hidden-xs hidden-sm " for="siq">
       Quit
      </label>
     </div>
     <div class="col-sm-4 col-md-3 col-lg-2 form-group">
      <div class="input-group datepicker">
       <input aria-describedby="siq-addon" class="form-control" data-fv-date="true" data-fv-date-max="VAPALS.todaysDate" id="siq" name="siq"/>
       <div class="input-group-addon">
        <div class="input-group-text" id="siq-addon">
         <i aria-hidden="true" class="fa fa-calendar">
         </i>
        </div>
       </div>
      </div>
      <small class="form-text text-muted">
       MM/DD/YYYY
      </small>
     </div>
    </div>
    <div class="row">
     <div class="col-md-4">
      <label class="visible-xs visible-sm " for="sicep">
       Smoking cessation education provided
      </label>
      <label class="text-right pull-right hidden-xs hidden-sm " for="sicep">
       Smoking cessation education provided
      </label>
     </div>
     <div class="col-md-8 form-group">
      <textarea class="form-control" id="sicep" name="sicep" type="text"></textarea>
     </div>
    </div>
    <div class="row">
     <div class="col-md-4">
      <label class="visible-xs visible-sm " for="sicadx">
       Lung CA Dx (if applicable)
      </label>
      <label class="text-right pull-right hidden-xs hidden-sm " for="sicadx">
       Lung CA Dx (if applicable)
      </label>
     </div>
     <div class="col-md-4 form-group">
      <div class="input-group datepicker">
       <input aria-describedby="sicadx-addon" class="form-control" data-fv-date="true" data-fv-date-max="VAPALS.todaysDate" id="sicadx" name="sicadx"/>
       <div class="input-group-addon">
        <div class="input-group-text" id="sicadx-addon">
         <i aria-hidden="true" class="fa fa-calendar">
         </i>
        </div>
       </div>
      </div>
      <small class="form-text text-muted">
       MM/DD/YYYY
      </small>
     </div>
     <div class="col-md-4 form-group">
      <input class="form-control" id="sicadxl" name="sicadxl" type="text"/>
      <span class="help-block">
       Location if not in VA
      </span>
     </div>
    </div>
    <div class="row">
     <div class="col-md-4">
      <label class="visible-xs visible-sm " for="sipldct">
       Prior LDCT
      </label>
      <label class="text-right pull-right hidden-xs hidden-sm " for="sipldct">
       Prior LDCT
      </label>
     </div>
     <div class="col-md-4 form-group">
      <div class="input-group datepicker">
       <input aria-describedby="sipldct-addon" class="form-control" data-fv-date="true" data-fv-date-max="VAPALS.todaysDate" id="sipldct" name="sipldct"/>
       <div class="input-group-addon">
        <div class="input-group-text" id="sipldct-addon">
         <i aria-hidden="true" class="fa fa-calendar">
         </i>
        </div>
       </div>
      </div>
      <small class="form-text text-muted">
       MM/DD/YYYY
      </small>
     </div>
     <div class="col-md-4 form-group">
      <input class="form-control" id="sipldctl" name="sipldctl" type="text"/>
      <span class="help-block">
       Location if not in VA
      </span>
     </div>
    </div>
    <hr/>
    <div class="row">
     <div class="col-md-12 form-group">
      <div class="checkbox">
       <label class="required">
        <input data-fv-notempty-message="Confirm that the discussion has taken place" id="siidmdc" name="siidmdc" required="required" type="checkbox" value="1"/>
        Informed Decision Making discussion complete
       </label>
      </div>
     </div>
    </div>
    <p class="alert alert-warning">
     Veteran of age and exposure to cigarette smoke as described above, and without a current
                diagnosis or obvious symptoms suggestive of lung cancer, has been educated today about the
                estimated risk for lung cancer, the possibility of a cure or live prolonging if an early lung
                cancer were to be found during screening, the possibility of imaging abnormalities not being
                lung cancer, the possibility of complications from additional diagnostic procedures, and the
                approximate amount of radiation exposure associated with each screening procedure. In addition,
                the Veteran has been educated today about the importance of avoiding exposure to cigarette
                smoke, available tobacco cessation programs and available lung screening services at this VA
                facility. Education material was provided to the veteran.
     <br/>
     <br/>
     Based on this information, the Veteran has opted for:
    </p>
    <div class="row">
     <div class="col-md-12 form-group">
      <label class="required">
       LDCT ordered
      </label>
      <div class="radio">
       <label>
        <input id="sildct-n" name="sildct" required="required" type="radio" value="n"/>
        No
       </label>
      </div>
      <div class="radio">
       <label>
        <input id="sildct-l" name="sildct" type="radio" value="l"/>
        Not at this time, okay to contact in the future
       </label>
      </div>
      <div class="radio">
       <label>
        <input id="sildct-y" name="sildct" type="radio" value="y"/>
        Yes
       </label>
      </div>
     </div>
    </div>
    <div class="row">
     <div class="col-md-12 form-group">
      <label class="control-label" for="siclin">
       Clinical Indications for Initial Screening CT
      </label>
      <textarea class="form-control" id="siclin" name="siclin" rows="3"></textarea>
     </div>
    </div>
    <hr/>
    <div class="pull-left">
     <button class="btn btn-primary" id="submit-button" type="submit">
      Submit
     </button>
    </div>
    <div class="pull-right">
     <a class="btn btn-danger" id="delete-form">
      <span class="glyphicon glyphicon-trash">
      </span>
      Delete
     </a>
    </div>
   </form>
  </div>
  <div class="modal fade" id="delete-confirm-modal" role="dialog" tabindex="-1">
   <div class="modal-dialog" role="document">
    <div class="modal-content">
     <div class="modal-header">
      <button aria-label="Close" class="close" data-dismiss="modal" type="button">
       <span aria-hidden="true">
        ×
       </span>
      </button>
      <h4 class="modal-title">
       Warning
      </h4>
     </div>
     <div class="modal-body">
      <p>
       Are you certain you want to delete this form?
      </p>
     </div>
     <div class="modal-footer">
      <a class="btn btn-primary" data-dismiss="modal" id="delete-form-cancel">
       No
      </a>
      <a class="btn btn-danger navigation" data-form="@@FORMKEY@@" data-method="post" data-samiroute="deleteform" href="#!" id="delete-form-btn">
       Yes
      </a>
     </div>
    </div>
   </div>
  </div>
  <footer>
   <div class="container-fluid" style="max-width:1550px">
    <hr/>
    <a href="https://issues.osehra.org/browse/VAP" tabindex="9000" target="_blank">
     Submit feedback
    </a>
    <span id="sami-version" style="float:right; font-family: Courier,monospace">
     SNAPSHOT 2018.08.20
    </span>
   </div>
  </footer>
  <script language="JavaScript">
   const studyId = "@@SID@@";
    if (studyId) {
        $("#studyIdMenu").show();
    }

    $(function () {
        /** These snippets ensure all fields are wrapped in a form-group, which is necessary for form-validation to work properly. **/
        const $forms = $("form.validated");
        $.each($forms.find("select, textarea, input:visible"), function (i, o) {
            const $input = $(this);
            if ($input.closest(".form-group").length === 0) {
                console.error("VAPALS: " + $input.attr('name') + " is not wrapped in a form-group; can cause FV 'too much recursion");
            }
        });

        $.each($forms.find("input[type=hidden][required]"), function (i, o) {
            const $input = $(this);
            console.error("VAPALS: " + $(this).attr('name') + " should not have a required attribute; can cause FV 'too much recursion'");
        });
    })
  </script>
  <script language="JavaScript">
   $(function () {
            $("#sicpd").on('keyup change', function () {
                var cigsPerDay = $("#sicpd").val();
                if (cigsPerDay >= 0) {
                    var cpd = (cigsPerDay/20).toFixed(2);
                    if (cpd > 0) {
                        $("#sippd").val(cpd);
                        $("#sippd-val").text(cpd);
                    }
                    else {
                        $("#sippd").val("");
                        $("#sippd-val").text("-");
                    }
                    $("#sippd").change();
                }
            }).trigger('change');

            $("#sippd, #sisny").on('keyup change', function () {
                var packsPerDay = $("#sippd").val();
                var cigYears = $("#sisny").val();
                if (packsPerDay > 0 && cigYears >0) {
                    var packYears = (packsPerDay*cigYears).toFixed(1);
                    if (packYears > 0) {
                        $("#sippy").val(packYears);
                        $("#sippy-val").text(packYears);
                    } 
                } else {
                     $("#sippy").val("");
                     $("#sippy-val").text("-");
                }
                
            }).first().trigger('change');
            
            $("#silnpo").conditionallyEnable({sourceValues: "1", enable: "#silnpos"}); 

            $(".validated").formValidation({framework: 'bootstrap'});
        });
  </script>
 </body>
</html>